<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="main-header" id="navbar"></header>
    <div class="flex-items" id="products"></div>
  </body>
</html>

<script type="module">
  import { loadNavbar } from "./navbar/navbar.js";
  loadNavbar();

  let params = new URLSearchParams(window.location.search);
  let categoryId = params.get("category");
  console.log("Category ID:", categoryId);

  const products = JSON.parse(localStorage.getItem("products")) || [];

  let filteredProducts = products.filter(
    (product) => product.CategoryId.toString() === categoryId
  );

  console.log("Filtered Products:", filteredProducts);
  let productsContainer = document.getElementById("products");
  filteredProducts.forEach((product) => {
    let productCard = document.createElement("div");
    productCard.className = "product-card";

    let img = document.createElement("img");
    img.src = product.ImageUrl;
    productCard.appendChild(img);

    let name = document.createElement("h3");
    name.textContent = product.ProductName;
    productCard.appendChild(name);

    let price = document.createElement("p");
    price.textContent = `$${parseFloat(product.Price).toFixed(2)}`;
    productCard.appendChild(price);

    productsContainer.appendChild(productCard);
    product.Priceint;
  });
</script>
